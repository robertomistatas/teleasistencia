const e=e=>e?e.toString().trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," "):"",a=(e,a=null)=>{if(!e)return null;try{if("number"==typeof e){return new Date(86400*(e-25569)*1e3).toISOString()}if("string"==typeof e&&e.includes("T"))return e;let r;if(e.includes("/"))r=e.split("/");else{if(!e.includes("-"))return null;r=e.split("-")}let[t,i,n]=r.map(e=>parseInt(e,10));if(n<100&&(n+=2e3),!t||!i||!n||i>12||t>31)return null;let o=`${n}-${i.toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}`;o+=a?`T${a.toString().padStart(8,"0")}`:"T00:00:00.000Z";const s=new Date(o);return isNaN(s.getTime())?null:s.toISOString()}catch(r){return console.error("Error parsing date:",e,r),null}},r=e=>e&&"object"==typeof e?{fecha:e.fecha||null,hora:e.hora||null,duracion:"number"==typeof e.duracion?e.duracion:0,tipo:e.tipo||"",telefono:e.telefono||"",teleoperadora:e.teleoperadora||"",comentarios:e.comentarios||""}:null,t=e=>Array.isArray(e)?e.map(r).filter(Boolean):[],i=()=>({totalLlamadas:0,entrantes:0,salientes:0,duracionTotal:0,duracionPromedio:0,beneficiarios:new Set,llamadasPorBeneficiario:{},ultimasLlamadas:{},llamadasExitosas:{},beneficiariosAlDia:new Set,beneficiariosPendientes:new Set,beneficiariosUrgentes:new Set,comunas:new Map,teleoperadoras:{}}),n=e=>{if(!e||"object"!=typeof e)return i();const a=i();try{return a.totalLlamadas=e.totalLlamadas||0,a.entrantes=e.entrantes||0,a.salientes=e.salientes||0,a.duracionTotal=e.duracionTotal||0,a.duracionPromedio=e.duracionPromedio||0,a.beneficiarios=new Set(e.beneficiarios||[]),a.beneficiariosAlDia=new Set(e.beneficiariosAlDia||[]),a.beneficiariosPendientes=new Set(e.beneficiariosPendientes||[]),a.beneficiariosUrgentes=new Set(e.beneficiariosUrgentes||[]),a.comunas=new Map(Object.entries(e.comunas||{})),e.llamadasPorBeneficiario&&Object.entries(e.llamadasPorBeneficiario).forEach(([e,r])=>{r&&Array.isArray(r.llamadas)&&(a.llamadasPorBeneficiario[e]=t(r.llamadas))}),e.ultimasLlamadas&&Object.entries(e.ultimasLlamadas).forEach(([e,t])=>{const i=r(t);i&&(a.ultimasLlamadas[e]=i)}),e.llamadasExitosas&&Object.entries(e.llamadasExitosas).forEach(([e,r])=>{a.llamadasExitosas[e]=t(r)}),a.teleoperadoras=e.teleoperadoras||{},a}catch(n){return console.error("Error parsing stored stats:",n),i()}};export{i as c,a as e,e as n,n as p};
//# sourceMappingURL=utils-d3c5c3a6.js.map
